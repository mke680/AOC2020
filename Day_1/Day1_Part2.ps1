Measure-Command {
    $total = 2020
    #$file = 'C:\Users\mcho\OneDrive - GRACE WORLDWIDE (AUSTRALIA) PTY LTD\Documents\AOC\Day_1\Day1Input.txt'
    #$inputs = import-csv $file -Header 'Expense'
    #$inputs = 1293,1207,1623,1675,1842,1410,85,1108,557,1217,1506,1956,1579,1614,1360,1544,1946,1666,1972,1814,1699,1778,1529,2002,1768,1173,1407,1201,1264,1739,1774,1951,1980,1428,1381,1714,884,1939,1295,1694,1168,1971,1352,1462,1828,1402,1433,1542,1144,1331,1427,1261,1663,1820,1570,1874,1486,1613,1769,1721,1753,1142,1677,2010,1640,1465,1171,534,1790,2005,1604,1891,1247,1281,1867,1403,2004,1668,1416,2001,1359,686,1965,1728,1551,1565,1128,1832,1757,1350,1808,1711,1799,1590,1989,1547,1140,1905,1368,1179,1902,1473,1908,1859,1257,1394,1244,1800,1695,1731,1474,1781,1885,1154,1990,1929,1193,1302,1831,1226,1418,1400,1435,1645,1655,1843,1227,1481,1754,1290,1685,1498,71,1286,1137,1288,1758,1987,1471,1839,1545,1682,1615,1475,1849,1985,1568,1795,1184,1863,1362,1271,1802,1944,1821,1880,1788,1733,1150,1314,1727,1434,1833,1312,1457,160,1629,1967,1505,1239,1266,1838,1687,1630,1591,1893,1450,1234,1755,1523,1533,1499,1865,1725,1444,1517,1167,1738,1519,1263,1901,1627,1644,1771,1812,1270,1497,1707,1708,1396 
    #$inputs = 1539,1914,1866,1407,1706,1423,1834,1700,1573,1486,1743,1394,1693,1705,1530,1811,1626,1473,1901,1481,1527,1841,1891,1750,1343,1899,401,1896,1627,1593,1541,874,1484,1210,1692,1963,1964,1780,671,1862,1393,1309,1740,1831,1932,1185,1979,1504,1663,1610,1494,1511,1103,1738,1816,1871,1545,1595,1784,1412,1815,1998,1783,1770,1426,1699,1416,1880,1612,1989,1360,1869,1762,1690,1999,1990,1521,1730,703,1463,1670,1472,1413,1669,1502,1548,1475,1694,1314,1980,980,1667,890,1569,1456,1406,1924,1973,1965,1533,1827,2000,1847,1520,1729,1512,1555,1566,1505,1672,1169,1835,1850,1493,1861,1288,1675,1676,1556,1320,1757,1870,1642,1903,1372,1967,1894,176,1908,1418,1535,1487,1496,1491,1611,1970,1758,1563,1766,1629,1937,1763,1829,1772,1632,1517,1736,1971,1721,1716,1429,1408,1560,1958,1359,1890,1825,1536,1819,1697,1887,1832,2005,892,1471,1425,1677,1673,1128,1878,1062,1470,1875,1854,1518,1568,1919,256,1532,1711,1944,1344,1330,1636,1957,1709,1551,1983,1674,1671,1959,1760,1689,1767,1477,1589,1897,1144,1982,1544
    #$inputs = 481,106,154,613,314,597,186,320,447,534,277,626,327,315,490,209,394,547,119,539,493,179,129,270,677,121,1619,124,393,427,479,1146,536,810,328,57,56,240,1349,158,627,711,280,189,88,835,41,516,357,410,526,509,917,282,204,149,475,425,236,608,205,22,237,250,594,321,604,140,408,31,660,151,258,330,21,30,499,290,1317,557,350,548,607,351,518,472,545,326,706,40,1040,353,1130,451,564,614,96,47,55,487,193,20,173,500,291,508,465,454,515,348,851,185,170,527,159,732,345,344,464,700,263,150,378,117,648,53,126,1844,112,602,485,533,524,529,409,50,262,457,254,391,83,257,191,248,388,503,284,49,299,304,591,612,460,62,661,130,195,484,201,323,133,188,15,1128,549,595,343,347,892,142,958,550,145,166,502,452,101,1764,488,309,76,676,690,384,63,311,469,37,346,349,61,260,331,253,543,431,123,876,38,476
    $inputs = 1,2,5,4,101,6,17,3,7,1002,500,518,200,19,10,12,13,11

    $result = 0
    $attempts = 0
    ## Assuming all the numbers in the list are lower than 2020. Then you don't have extremely large or small numbers destroying your average.
    $avg1 = ($inputs | Measure-Object -Average).Average

    ## Isolate all values lower than average. If you have lots of high numbers you'll get a big average. 
    $firstpass = $inputs.Where({$_ -le $avg1})
    $remainders = $inputs.Where({$_ -ge $avg1})
    $avg2 = ($firstpass | Measure-Object -Average).Average
    $secondpass =  $firstpass.Where({$_ -le $avg2})
    $avg3 = ($secondpass | Measure-Object -Average).Average
    $thirdpass =  $secondpass.Where({$_ -le $avg3})
    
    foreach($input in $firstpass){
    #write-host $input
        #if($input/1 -le $avg){
        foreach($test in $inputs){
            if($input/1 + $test/1 -le $total){
                foreach($test2 in $inputs){
                    $attempts++
                    $result = $input/1 + $test/1 + $test2/1
                    if($result -eq 2020){
                        write-host ($input/1 * $test/1 * $test2/1) -ForegroundColor Green
                        write-host $attempts -ForegroundColor Red
                        Write-Host $input '+' $test '+' $test2
                        return 
                    }
                }
            }
        }
    } 
}